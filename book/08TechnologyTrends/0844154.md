### 8.4.4 区块链数据的隐私保护
&emsp;&emsp;区块链的隐私保护可以通过密码学来进行加密保护，密码学是以安全多方计算（Secure Multi-party Computation）、同态加密（Homomorphic Encryption）、零知识证明（Zero-knowledge Proof）等代表的隐私计算技术，以下对这三个代表性技术进行简要介绍：

1. 安全多方计算能够实现计算参与各方在原始数据保留在各自本地的情况下，完成数据的协同分析，并产生正确的结果。整个计算过程中，除了计算结果能被各方获知外，其他任何有效信息均不会泄漏；
2. 零知识证明技术是一种非常特殊的证明系统。在这一证明系统里，
证明者知道关于某个问题的答案，他需要向验证者证明“他知道答案”这
一事实，但是要求验证者不能获得答案的任何信息。在该技术下延伸出一种名为防弹零知识协议，该协议是基于离散对数的更节省空间的零知识证明，拥有字节数更小、验证速度更快、协议更通用的特点；
3. 同态加密可实现对密文数据进行任意函数的计算，这意味着将原始数据加密后，通过一个计算资源强大的第三方，即能对数据拥有者的数据密文进行任何所需的处理分析。

#### 8.4.4.3 同态加密在区块链数据保护的应用

&emsp;&emsp;区块链可以防篡改，去中心化，在非信任的网络运行，但是用户的账本对参与组织是透明的，任何组织都可以访问到相同的数据，如果将用户的隐私的数据放到链上将会放大用户隐私泄露的风险。当前在比特币等公有链系统中，所有的交易信息都是公开的（包括交易金额）。但是，在金融业的交易中，金融交易信息是敏感数据，非业务相关方不能查看，但同时要满足监管机构的监管要求，而大部分的区块链并没有满足隐私性要求。

&emsp;&emsp;华为区块链交易解决方案中：

1. 提供同态加密库，对用户的交易数据用其公钥进行加密保护，交易的时候都是密文运算，最终账本中加密保存，即使节点被攻破，获取到账本记录也无法解密；
2. 提供范围证明校验，背书节点能够对密文进行背书，无需解密就能校验交易的正确性，从而识别出恶意交易风险，保证了智能合约的正确执行。华为开发出适用于Hyperledger Fabric平台的保密交易系统，通过改良的算法，比起使用传统的加法同态加密与基于环签名的范围零知识证明，性能大幅提升。

#### 8.4.4.4 可信执行环境在区块链数据保护的应用

&emsp;&emsp;可信执行环境（TEE）通过硬件技术来对数据进行隔离保护，将数据分类处理。支持TEE的CPU中，会有一个特定的区域，该区域的作用是给数据和代码的执行提供一个更安全的空间，并保证它们的机密性和完整性。因为TEE提供了一个与外部环境隔离的特定环境保存用户的敏感信息，TEE可以直接获取外部环境的信息，而外部环境不能获取TEE的信息，例如当手机用户进行电子支付时，设备会通过TEE提供的接口来进行验证，以保证支付信息不会被篡改，密码不会被劫持，指纹信息不会被盗用。在TEE上运行的应用叫做可信应用，可信应用之间互相隔离，未授权前提下无法随意读取和操作其它可信应用的数据。此外，可信应用在执行前需要做完整性验证，保证应用没有被篡改。

&emsp;&emsp;可以看到，通过软件算法或者硬件技术实现的各类系统和应用级别的隔离，保证了隐私信息在特殊环境下被安全地计算、保存、传输和删除。TEE技术通常依赖于具体的技术平台（例如移动端、PC端等）和实现厂商，常见技术包括Intel SGX, ARMTrustZone，AMD SEM/SEV等。
#### 7.3.1.4 扩容与分叉
&emsp;&emsp;比特币每秒约７笔的处理速度，一直被社区用户诟病，比特币网络交易拥堵的情常有发生，甚至交易发出24小时后还没有被打包确认，类似现象随着比特币价格的攀升以及区块链市场用户量的激增而愈演愈烈。

&emsp;&emsp;比特币网络的交易处理能力，受到了10分钟平均出块时间和1MB区块容量的限制。随着比特币不断增加的关注度，使得区块容量这一缺陷暴露无疑，导致了过高的交易费用以及较长的交易处理延迟。

* 扩容

&emsp;&emsp;关于比特币的扩容改进方案，代表不同利益集团的不同组织持有不同的态度。目前主要的比特币扩容技术有：

1. 支付通道（PaymentChannels）是运行在比特币网络上的二层结构，允许参与的双方直接建立彼此间点对点的支付渠道,参与方可以安全地维护和更新彼此间私有账本，这样他们在通道内的交易就不需要写入区块链；
2. 隔离见证（SegregatedWitness）是比特币的交易格式的软分叉修正，一方面解决比特币中存在的延展性攻击，另一方面也缓解因区块容量限制而引起的容量、可扩展性、吞吐量问题，从而优化比特币交易的处理速度[@常兴2019比特币扩容技术的发展现状与展望]；
3. 闪电网络（Lightning Network）是一个去中心化的系统。闪电网络的卓越之处在于，无需信任对方以及第三方即可实现实时的、海量的交易网络。闪电网络是基于微支付通道演进而来，创造性的设计出了两种类型的交易合约：序列到期可撤销合约（Revocable Sequence Maturity Contract，RSMC）与哈希时间锁定合约（Hashed Timelock Contract，HTLC），RSMC解决了通道中币单向流动问题，HTLC解决了币跨节点传递的问题，这两个类型的交易组合构成了闪电网络。

* 分叉

&ensp;&ensp;为了提高比特币网络的交易处理能力，需要对比特币系统现有的架构进行改进，这里的软件更新过程不同于普通软件升级方式，被称为分叉，有两种不同的类型：

1. 硬分叉（HardFork）指的是区块链会发生永久性分歧，在新共识规则发布后，部分没有升级的节点无法验证已经升级的节点生产的区块，硬分叉就会发生。比特币区块格式或交易格式发生改变时，未升级的节点拒绝验证已经升级的节点生产出的区块，不过已经升级的节点可以验证未升级节点生产出的区块，各节点延续自己认为正确的链，因此分成两条链；
2. 软分叉（SoftFork）指的是当共识规则发布后，没有升级的节点会因为不知道新共识规则，而生产出不合法的区块，就会产生临时性分叉。当比特币交易的数据结构发生改变时，未升级的节点可以验证已经升级的节点生产出的区块，而且已经升级的节点也可以验证未升级的节点生产出的区块。

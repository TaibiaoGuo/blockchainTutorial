#### 7.3.1.3 挖矿
* 挖矿节点

&emsp;&emsp;挖矿节点是开启了PoW算法的节点，在相互竞争中产生新的区块。根据挖矿节点是全节点还是SPV节点，挖矿节点可以细分为3类：
1. 如果挖矿节点同时是全节点，则其可以选择独立挖矿或者参与到矿池中和其他节点共享算力；
2. 如果挖矿节点是SPV节点，则其只能选择加入矿池中和其他节点共享算力；
3. 挖矿节点甚至可以不是SPV节点，只需要加入矿池，矿池会分配一部分工作量证明任务到节点，节点进行PoW计算。

* 矿池

&emsp;&emsp;挖矿大致可以分为两种方式，一种是个人挖矿，一种是矿池挖矿。最开始大家都是采用Solo模式，挖到块后单节点独享所有奖励，但随着比特币算力飙升，个人挖矿方式挖到比特币的概率越来越小，个人挖矿存在收益不稳定的情况。

&emsp;&emsp;为了追求相对稳定的收益，矿池应运而生。矿池简单来说就是将PoW计算问题切分为多段，大家都把算力集中到矿池，每个人分配一部分任务。因为算力共享，能挖到块的概率会大大增加，挖到块的奖励则根据每个人的算力占比进行分配。矿池的核心工作是给矿工分配任务，统计工作量并分发收益。和个人模式相比，矿工收益的期望值没有变，但收益更加持续稳定。
* 矿池任务分配原理

&emsp;&emsp;挖矿的过程实际上就是计算机不停进行哈希计算，直到找到符合条件的目标值，目标值是一个总长度256位的二进制数，要求前n位为连续0。矿池的任务分配原理就是将PoW计算分解为小任务，矿工完成一个任务后将结果提交给矿池，这个提交的操作叫做share。假设全网难度要求n的值为100，即前100个比特位为0，矿池可能会给矿工分配一个任务，要求前30位为0，然后再从所有提交的任务中，寻找有没有凑巧前100位为0的目标值。

&emsp;&emsp;不同矿机（专门用于挖矿算法的机器）算力大小不同，矿池会根据大家的算力大小分配难度不同的任务。比如A矿机算力1T，B矿机算力10T，那么矿池给A矿机分配任务要求前10个比特位为0，B矿机的任务可能会是前20个比特位为0。前20个比特位为0成为符合条件目标值的概率肯定是大于前10个比特位为0的概率。
